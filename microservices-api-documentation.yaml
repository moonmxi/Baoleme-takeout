openapi: 3.0.3
info:
  title: 饱了么微服务后端API文档
  description: |
    饱了么外卖平台微服务化后端API文档
    
    ## 微服务架构说明
    
    本系统采用微服务架构，包含以下核心服务：
    - **admin-service**: 管理员服务 (端口: 8084)
    - **user-service**: 用户服务 (端口: 8081)
    - **merchant-service**: 商家服务 (端口: 8082)
    - **rider-service**: 骑手服务 (端口: 8083)
    - **common-service**: 公共服务 (端口: 8085)
    - **gateway-forward-service**: 网关转发服务 (端口: 8090)
    
    ## 认证说明
    
    所有需要认证的API都使用JWT Bearer Token认证方式。
    
    ## 响应格式
    
    所有API响应都遵循统一的格式：
    ```json
    {
      "success": true,
      "message": "操作成功",
      "data": {}
    }
    ```
    
  version: 1.0.0
  contact:
    name: Baoleme Team
    email: support@baoleme.com
servers:
  - url: http://localhost:8090
    description: 开发环境网关服务器
  - url: http://localhost:8084
    description: 管理员服务
  - url: http://localhost:8081
    description: 用户服务
  - url: http://localhost:8082
    description: 商家服务
  - url: http://localhost:8083
    description: 骑手服务
  - url: http://localhost:8085
    description: 公共服务

security:
  - BearerAuth: []

tags:
  - name: 管理员认证
    description: 管理员登录、登出相关接口
  - name: 管理员管理
    description: 管理员对用户、商家、骑手、店铺、商品的管理接口
  - name: 用户认证
    description: 用户注册、登录、信息管理接口
  - name: 用户功能
    description: 用户搜索、收藏、购物车、优惠券等功能接口
  - name: 商家认证
    description: 商家注册、登录、信息管理接口
  - name: 商家管理
    description: 商家店铺、商品管理接口
  - name: 骑手认证
    description: 骑手注册、登录、信息管理接口
  - name: 骑手功能
    description: 骑手接单、配送相关接口
  - name: 订单管理
    description: 订单创建、查询、状态更新等接口
  - name: 评论管理
    description: 评论提交、查看、管理接口
  - name: 优惠券管理
    description: 优惠券创建、领取、使用接口
  - name: 消息通信
    description: 用户间聊天消息接口

paths:
  # ==================== 管理员服务 API ====================
  /admin/login:
    post:
      tags:
        - 管理员认证
      summary: 管理员登录
      description: 管理员使用ID和密码进行登录认证
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminLoginRequest'
      responses:
        '200':
          description: 登录成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/AdminLoginResponse'
        '400':
          description: 登录失败
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommonResponse'

  /admin/logout:
    post:
      tags:
        - 管理员认证
      summary: 管理员登出
      description: 管理员登出系统，清除登录状态
      requestBody:
        required: false
      responses:
        '200':
          description: 登出成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommonResponse'

  /admin/userlist:
    post:
      tags:
        - 管理员管理
      summary: 分页查看用户列表
      description: 管理员分页查询用户列表，支持关键词搜索和ID范围筛选
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminUserQueryRequest'
      responses:
        '200':
          description: 查询成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/AdminUserQueryResponse'

  /admin/merchantlist:
    post:
      tags:
        - 管理员管理
      summary: 分页查看商家列表
      description: 管理员分页查询商家列表，支持关键词搜索和ID范围筛选
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminMerchantQueryRequest'
      responses:
        '200':
          description: 查询成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/AdminMerchantQueryResponse'

  /admin/storelist:
    post:
      tags:
        - 管理员管理
      summary: 分页查看店铺列表
      description: 管理员分页查询店铺列表，支持关键词搜索、商家ID和状态筛选
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminStoreQueryRequest'
      responses:
        '200':
          description: 查询成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/AdminStoreQueryResponse'

  /admin/productlist:
    post:
      tags:
        - 管理员管理
      summary: 分页查看商品列表
      description: 管理员分页查询指定店铺的商品列表
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminProductQueryRequest'
      responses:
        '200':
          description: 查询成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          products:
                            type: array
                            items:
                              type: object

  /admin/search:
    post:
      tags:
        - 管理员管理
      summary: 搜索店铺和商品
      description: 管理员搜索店铺和商品，支持关键词、距离、价格、评分等多条件筛选
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminSearchRequest'
      responses:
        '200':
          description: 搜索成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          results:
                            type: array
                            items:
                              $ref: '#/components/schemas/AdminSearchResponse'

  # ==================== 用户服务 API ====================
  /user/register:
    post:
      tags:
        - 用户认证
      summary: 用户注册
      description: 新用户注册账号
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserRegisterRequest'
      responses:
        '200':
          description: 注册成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/UserRegisterResponse'

  /user/login:
    post:
      tags:
        - 用户认证
      summary: 用户登录
      description: 用户使用手机号和密码登录
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserLoginRequest'
      responses:
        '200':
          description: 登录成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/UserLoginResponse'

  /user/info:
    get:
      tags:
        - 用户认证
      summary: 获取用户信息
      description: 获取当前登录用户的详细信息
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/UserInfoResponse'

  /user/search:
    post:
      tags:
        - 用户功能
      summary: 搜索店铺和商品
      description: 用户搜索店铺和商品，支持关键词、距离、价格、评分等多条件筛选
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserSearchRequest'
      responses:
        '200':
          description: 搜索成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          results:
                            type: array
                            items:
                              $ref: '#/components/schemas/UserSearchResponse'

  # ==================== 商家服务 API ====================
  /merchant/register:
    post:
      tags:
        - 商家认证
      summary: 商家注册
      description: 新商家注册账号
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MerchantRegisterRequest'
      responses:
        '200':
          description: 注册成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/MerchantRegisterResponse'

  /merchant/login:
    post:
      tags:
        - 商家认证
      summary: 商家登录
      description: 商家使用手机号和密码登录
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MerchantLoginRequest'
      responses:
        '200':
          description: 登录成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/MerchantLoginResponse'

  /store/create:
    post:
      tags:
        - 商家管理
      summary: 创建店铺
      description: 商家创建新店铺
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StoreCreateRequest'
      responses:
        '200':
          description: 创建成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/StoreCreateResponse'

  /product/create:
    post:
      tags:
        - 商家管理
      summary: 创建商品
      description: 商家在店铺中创建新商品
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductCreateRequest'
      responses:
        '200':
          description: 创建成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/ProductCreateResponse'

  /product/info:
    post:
      tags:
        - 商家管理
      summary: 获取商品详情
      description: 获取商品的详细信息，包括评价列表
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductInfoRequest'
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/ProductInfoResponse'

  # ==================== 骑手服务 API ====================
  /rider/register:
    post:
      tags:
        - 骑手认证
      summary: 骑手注册
      description: 新骑手注册账号
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RiderRegisterRequest'
      responses:
        '200':
          description: 注册成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/RiderRegisterResponse'

  /rider/login:
    post:
      tags:
        - 骑手认证
      summary: 骑手登录
      description: 骑手使用手机号和密码登录
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RiderLoginRequest'
      responses:
        '200':
          description: 登录成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/RiderLoginResponse'

  # ==================== 订单服务 API ====================
  /orders/create:
    post:
      tags:
        - 订单管理
      summary: 创建订单
      description: 用户创建新订单
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrderCreateRequest'
      responses:
        '200':
          description: 创建成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/OrderResponse'

  /orders/available:
    get:
      tags:
        - 订单管理
      summary: 获取可抢订单列表
      description: 骑手获取可抢的订单列表
      parameters:
        - name: page
          in: query
          required: true
          schema:
            type: integer
            minimum: 1
          description: 页码
        - name: page_size
          in: query
          required: true
          schema:
            type: integer
            minimum: 1
          description: 每页大小
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          orders:
                            type: array
                            items:
                              $ref: '#/components/schemas/Order'

  /orders/grab:
    put:
      tags:
        - 订单管理
      summary: 抢单
      description: 骑手抢取订单
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrderGrabRequest'
      responses:
        '200':
          description: 抢单成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          order_id:
                            type: integer
                            format: int64
                          pickup_deadline:
                            type: string
                            format: date-time

  /orders/cancel:
    put:
      tags:
        - 订单管理
      summary: 取消订单
      description: 骑手取消订单
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrderStatusUpdateRequest'
      responses:
        '200':
          description: 取消成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          order_id:
                            type: integer
                            format: int64
                          status:
                            type: string

  /orders/rider-update-status:
    post:
      tags:
        - 订单管理
      summary: 骑手更新订单状态
      description: 骑手更新订单配送状态
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrderStatusUpdateRequest'
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          order_id:
                            type: integer
                            format: int64
                          status:
                            type: integer
                          updated_at:
                            type: string
                            format: date-time

  /orders/merchant-update:
    put:
      tags:
        - 订单管理
      summary: 商家更新订单状态
      description: 商家更新订单状态（接单、准备完成等）
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrderStatusUpdateRequest'
      responses:
        '200':
          description: 更新成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          order_id:
                            type: integer
                            format: int64
                          new_status:
                            type: integer
                          update_at:
                            type: string
                            format: date-time
                          cancel_reason:
                            type: string

  /orders/merchant-list:
    get:
      tags:
        - 订单管理
      summary: 商家查看订单列表（GET方式）
      description: 商家分页查看店铺订单列表
      parameters:
        - name: store_id
          in: query
          required: true
          schema:
            type: integer
            format: int64
          description: 店铺ID
        - name: status
          in: query
          required: false
          schema:
            type: integer
          description: 订单状态筛选
        - name: page
          in: query
          required: true
          schema:
            type: integer
            minimum: 1
          description: 页码
        - name: page_size
          in: query
          required: true
          schema:
            type: integer
            minimum: 1
          description: 每页大小
      responses:
        '200':
          description: 查询成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          orders:
                            type: array
                            items:
                              $ref: '#/components/schemas/Order'
                          current_page:
                            type: integer
                          page_size:
                            type: integer

    post:
      tags:
        - 订单管理
      summary: 商家查看订单列表（POST方式）
      description: 商家分页查看店铺订单列表，支持JSON请求体
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MerchantOrderListRequest'
      responses:
        '200':
          description: 查询成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          orders:
                            type: array
                            items:
                              $ref: '#/components/schemas/Order'
                          current_page:
                            type: integer
                          page_size:
                            type: integer

  /orders/user-history:
    post:
      tags:
        - 订单管理
      summary: 用户查看订单历史
      description: 用户查看历史订单，支持状态和时间范围筛选
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserOrderHistoryRequest'
      responses:
        '200':
          description: 查询成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          orders:
                            type: array
                            items:
                              $ref: '#/components/schemas/Order'

  /orders/user-current:
    post:
      tags:
        - 订单管理
      summary: 用户查看当前订单
      description: 用户查看当前进行中的订单
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserCurrentOrderRequest'
      responses:
        '200':
          description: 查询成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          orders:
                            type: array
                            items:
                              $ref: '#/components/schemas/Order'

  /orders/{orderId}:
    get:
      tags:
        - 订单管理
      summary: 获取订单详情
      description: 根据订单ID获取订单基本信息
      parameters:
        - name: orderId
          in: path
          required: true
          schema:
            type: integer
            format: int64
          description: 订单ID
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Order'

  /orders/{orderId}/items:
    get:
      tags:
        - 订单管理
      summary: 获取订单商品明细
      description: 获取订单的商品明细和价格信息
      parameters:
        - name: orderId
          in: path
          required: true
          schema:
            type: integer
            format: int64
          description: 订单ID
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          order_items:
                            type: array
                            items:
                              $ref: '#/components/schemas/OrderItem'
                          price_info:
                            type: object

  /orders/detail:
    post:
      tags:
        - 订单管理
      summary: 获取订单完整详情
      description: 获取订单的完整详情信息，包括用户、商家、店铺、商品等相关信息
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrderDetailRequest'
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/OrderDetailResponse'

  # ==================== 评论管理 API ====================
  /reviews/submit:
    post:
      tags:
        - 评论管理
      summary: 提交评论
      description: 用户提交商品或店铺评论
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserReviewRequest'
      responses:
        '200':
          description: 提交成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/UserReviewResponse'

  /reviews/read:
    post:
      tags:
        - 评论管理
      summary: 查看评论列表
      description: 商家查看店铺评论列表，支持筛选和分页
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ReviewReadRequest'
      responses:
        '200':
          description: 查询成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/ReviewPageResponse'

  # ==================== 优惠券管理 API ====================
  /coupons/create:
    post:
      tags:
        - 优惠券管理
      summary: 创建优惠券
      description: 商家创建优惠券
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CouponCreateRequest'
      responses:
        '200':
          description: 创建成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CouponCreateResponse'

  /coupons/available:
    post:
      tags:
        - 优惠券管理
      summary: 查看可用优惠券
      description: 用户查看可用的优惠券列表
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AvailableCouponRequest'
      responses:
        '200':
          description: 查询成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Coupon'

  /coupons/claim:
    post:
      tags:
        - 优惠券管理
      summary: 领取优惠券
      description: 用户领取优惠券
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserClaimCouponRequest'
      responses:
        '200':
          description: 领取成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommonResponse'

  /coupons/user:
    post:
      tags:
        - 优惠券管理
      summary: 查看用户优惠券
      description: 用户查看自己的优惠券列表
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserViewCouponRequest'
      responses:
        '200':
          description: 查询成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/UserCouponResponse'

  # ==================== 消息通信 API ====================
  /messages/send:
    post:
      tags:
        - 消息通信
      summary: 发送消息
      description: 用户间发送聊天消息
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SendMessageRequest'
      responses:
        '200':
          description: 发送成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/ChatMessageResponse'

  /messages/history:
    post:
      tags:
        - 消息通信
      summary: 获取聊天记录
      description: 获取与指定用户的聊天记录
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChatHistoryRequest'
      responses:
        '200':
          description: 获取成功
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/CommonResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/ChatMessageResponse'

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT Bearer Token认证

  schemas:
    # ==================== 通用响应结构 ====================
    CommonResponse:
      type: object
      properties:
        success:
          type: boolean
          description: 操作是否成功
        message:
          type: string
          description: 响应消息
        data:
          type: object
          description: 响应数据
      required:
        - success
        - message

    # ==================== 管理员相关 DTO ====================
    AdminLoginRequest:
      type: object
      properties:
        adminId:
          type: integer
          format: int64
          description: 管理员ID
        password:
          type: string
          description: 密码
      required:
        - adminId
        - password

    AdminLoginResponse:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: 管理员ID
        token:
          type: string
          description: JWT令牌

    AdminUserQueryRequest:
      type: object
      properties:
        keyword:
          type: string
          description: 搜索关键词
        gender:
          type: string
          description: 性别筛选
        startId:
          type: integer
          format: int64
          description: 起始ID
        endId:
          type: integer
          format: int64
          description: 结束ID
        page:
          type: integer
          minimum: 1
          default: 1
          description: 页码
        pageSize:
          type: integer
          minimum: 1
          default: 10
          description: 每页大小

    AdminUserQueryResponse:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: 用户ID
        username:
          type: string
          description: 用户名
        description:
          type: string
          description: 用户描述
        phone:
          type: string
          description: 手机号
        avatar:
          type: string
          description: 头像URL
        createdAt:
          type: string
          format: date-time
          description: 创建时间

    AdminMerchantQueryRequest:
      type: object
      properties:
        keyword:
          type: string
          description: 搜索关键词
        startId:
          type: integer
          format: int64
          description: 起始ID
        endId:
          type: integer
          format: int64
          description: 结束ID
        page:
          type: integer
          minimum: 1
          default: 1
          description: 页码
        pageSize:
          type: integer
          minimum: 1
          default: 10
          description: 每页大小

    AdminMerchantQueryResponse:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: 商家ID
        username:
          type: string
          description: 商家用户名
        phone:
          type: string
          description: 手机号
        avatar:
          type: string
          description: 头像URL
        createdAt:
          type: string
          format: date-time
          description: 创建时间

    AdminStoreQueryRequest:
      type: object
      properties:
        keyword:
          type: string
          description: 搜索关键词
        type:
          type: string
          description: 店铺类型
        startRating:
          type: number
          format: decimal
          description: 最低评分
        endRating:
          type: number
          format: decimal
          description: 最高评分
        status:
          type: integer
          description: 店铺状态
        merchantId:
          type: integer
          format: int64
          description: 商家ID
        page:
          type: integer
          minimum: 1
          default: 1
          description: 页码
        pageSize:
          type: integer
          minimum: 1
          default: 10
          description: 每页大小

    AdminStoreQueryResponse:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: 店铺ID
        name:
          type: string
          description: 店铺名称
        type:
          type: string
          description: 店铺类型
        description:
          type: string
          description: 店铺描述
        location:
          type: string
          description: 店铺位置
        rating:
          type: number
          format: decimal
          description: 店铺评分
        status:
          type: integer
          description: 店铺状态
        merchantId:
          type: integer
          format: int64
          description: 商家ID

    AdminProductQueryRequest:
      type: object
      properties:
        storeId:
          type: integer
          format: int64
          description: 店铺ID
        page:
          type: integer
          minimum: 1
          default: 1
          description: 页码
        pageSize:
          type: integer
          minimum: 1
          default: 10
          description: 每页大小
      required:
        - storeId

    AdminSearchRequest:
      type: object
      properties:
        keyword:
          type: string
          description: 搜索关键词
        distance:
          type: number
          format: decimal
          description: 距离范围
        wishPrice:
          type: number
          format: decimal
          description: 期望价格
        startRating:
          type: number
          format: decimal
          description: 最低评分
        endRating:
          type: number
          format: decimal
          description: 最高评分
        page:
          type: integer
          minimum: 1
          default: 1
          description: 页码
        pageSize:
          type: integer
          minimum: 1
          default: 10
          description: 每页大小
      required:
        - keyword

    AdminSearchResponse:
      type: object
      properties:
        storeId:
          type: integer
          format: int64
          description: 店铺ID
        name:
          type: string
          description: 店铺名称
        type:
          type: string
          description: 店铺类型
        description:
          type: string
          description: 店铺描述
        location:
          type: string
          description: 店铺位置
        rating:
          type: number
          format: decimal
          description: 店铺评分
        status:
          type: integer
          description: 店铺状态
        image:
          type: string
          description: 店铺图片
        createdAt:
          type: string
          format: date-time
          description: 创建时间

    # ==================== 用户相关 DTO ====================
    UserRegisterRequest:
      type: object
      properties:
        username:
          type: string
          description: 用户名
        phone:
          type: string
          description: 手机号
        password:
          type: string
          description: 密码
        gender:
          type: string
          enum: [male, female, other]
          description: 性别
        description:
          type: string
          description: 个人描述
      required:
        - username
        - phone
        - password

    UserRegisterResponse:
      type: object
      properties:
        userId:
          type: integer
          format: int64
          description: 用户ID
        username:
          type: string
          description: 用户名
        phone:
          type: string
          description: 手机号

    UserLoginRequest:
      type: object
      properties:
        phone:
          type: string
          description: 手机号
        password:
          type: string
          description: 密码
      required:
        - phone
        - password

    UserLoginResponse:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: 用户ID
        username:
          type: string
          description: 用户名
        token:
          type: string
          description: JWT令牌

    UserInfoResponse:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: 用户ID
        username:
          type: string
          description: 用户名
        phone:
          type: string
          description: 手机号
        gender:
          type: string
          description: 性别
        description:
          type: string
          description: 个人描述
        avatar:
          type: string
          description: 头像URL
        createdAt:
          type: string
          format: date-time
          description: 创建时间

    UserSearchRequest:
      type: object
      properties:
        keyword:
          type: string
          description: 搜索关键词
        distance:
          type: number
          format: decimal
          description: 距离范围
        wishPrice:
          type: number
          format: decimal
          description: 期望价格
        startRating:
          type: number
          format: decimal
          description: 最低评分
        endRating:
          type: number
          format: decimal
          description: 最高评分
        page:
          type: integer
          minimum: 1
          default: 1
          description: 页码
        pageSize:
          type: integer
          minimum: 1
          default: 10
          description: 每页大小
      required:
        - keyword

    UserSearchResponse:
      type: object
      properties:
        storeId:
          type: integer
          format: int64
          description: 店铺ID
        name:
          type: string
          description: 店铺名称
        type:
          type: string
          description: 店铺类型
        description:
          type: string
          description: 店铺描述
        location:
          type: string
          description: 店铺位置
        rating:
          type: number
          format: decimal
          description: 店铺评分
        status:
          type: integer
          description: 店铺状态
        image:
          type: string
          description: 店铺图片
        createdAt:
          type: string
          format: date-time
          description: 创建时间

    # ==================== 商家相关 DTO ====================
    MerchantRegisterRequest:
      type: object
      properties:
        username:
          type: string
          description: 商家用户名
        phone:
          type: string
          description: 手机号
        password:
          type: string
          description: 密码
        businessLicense:
          type: string
          description: 营业执照号
        description:
          type: string
          description: 商家描述
      required:
        - username
        - phone
        - password

    MerchantRegisterResponse:
      type: object
      properties:
        userId:
          type: integer
          format: int64
          description: 商家ID
        username:
          type: string
          description: 商家用户名
        phone:
          type: string
          description: 手机号

    MerchantLoginRequest:
      type: object
      properties:
        phone:
          type: string
          description: 手机号
        password:
          type: string
          description: 密码
      required:
        - phone
        - password

    MerchantLoginResponse:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: 商家ID
        username:
          type: string
          description: 商家用户名
        token:
          type: string
          description: JWT令牌

    StoreCreateRequest:
      type: object
      properties:
        name:
          type: string
          description: 店铺名称
        type:
          type: string
          description: 店铺类型
        description:
          type: string
          description: 店铺描述
        location:
          type: string
          description: 店铺位置
        image:
          type: string
          description: 店铺图片URL
      required:
        - name
        - type
        - location

    StoreCreateResponse:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: 店铺ID
        name:
          type: string
          description: 店铺名称
        merchantId:
          type: integer
          format: int64
          description: 商家ID

    ProductCreateRequest:
      type: object
      properties:
        storeId:
          type: integer
          format: int64
          description: 店铺ID
        name:
          type: string
          description: 商品名称
        category:
          type: string
          description: 商品分类
        price:
          type: number
          format: decimal
          description: 商品价格
        description:
          type: string
          description: 商品描述
        image:
          type: string
          description: 商品图片URL
        stock:
          type: integer
          description: 商品库存
      required:
        - storeId
        - name
        - price

    ProductCreateResponse:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: 商品ID
        name:
          type: string
          description: 商品名称
        storeId:
          type: integer
          format: int64
          description: 店铺ID

    ProductInfoRequest:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: 商品ID
      required:
        - id

    ProductInfoResponse:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: 商品ID
        storeId:
          type: integer
          format: int64
          description: 店铺ID
        storeName:
          type: string
          description: 店铺名称
        storeLocation:
          type: string
          description: 店铺地址
        name:
          type: string
          description: 商品名称
        category:
          type: string
          description: 商品分类
        price:
          type: number
          format: decimal
          description: 商品价格
        description:
          type: string
          description: 商品描述
        image:
          type: string
          description: 商品图片URL
        stock:
          type: integer
          description: 商品库存
        rating:
          type: number
          format: decimal
          description: 商品评分
        status:
          type: integer
          description: 商品状态
        createdAt:
          type: string
          format: date-time
          description: 创建时间
        reviews:
          type: array
          items:
            $ref: '#/components/schemas/ProductReviewResponse'
          description: 商品评价列表
        reviewCount:
          type: integer
          description: 评价总数
        averageRating:
          type: number
          format: decimal
          description: 平均评分

    ProductReviewResponse:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: 评价ID
        userId:
          type: integer
          format: int64
          description: 用户ID
        username:
          type: string
          description: 用户名称
        userAvatar:
          type: string
          description: 用户头像
        productId:
          type: integer
          format: int64
          description: 商品ID
        quantity:
          type: integer
          description: 商品数量
        price:
          type: number
          format: decimal
          description: 商品单价
        productName:
          type: string
          description: 商品名称

    OrderGrabRequest:
      type: object
      properties:
        orderId:
          type: integer
          format: int64
          description: 订单ID
      required:
        - orderId

    OrderStatusUpdateRequest:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: 订单ID
        new_status:
          type: integer
          description: 目标状态（0:待接单 1:准备中 2:配送中 3:完成 4:取消）
        cancelReason:
          type: string
          description: 取消原因（当状态为取消时必填）
      required:
        - id
        - new_status

    OrderDetailRequest:
      type: object
      properties:
        orderId:
          type: integer
          format: int64
          description: 订单ID
      required:
        - orderId

    OrderDetailResponse:
      type: object
      properties:
        orderId:
          type: integer
          format: int64
          description: 订单ID
        status:
          type: integer
          description: 订单状态
        userLocation:
          type: string
          description: 用户位置
        storeLocation:
          type: string
          description: 店铺位置
        totalPrice:
          type: number
          format: decimal
          description: 订单总价格
        actualPrice:
          type: number
          format: decimal
          description: 实际支付价格
        deliveryPrice:
          type: number
          format: decimal
          description: 配送费用
        remark:
          type: string
          description: 订单备注
        createdAt:
          type: string
          format: date-time
          description: 订单创建时间
        deadline:
          type: string
          format: date-time
          description: 订单截止时间
        endedAt:
          type: string
          format: date-time
          description: 订单结束时间
        userId:
          type: integer
          format: int64
          description: 用户ID
        username:
          type: string
          description: 用户名
        userPhone:
          type: string
          description: 用户手机号
        userAvatar:
          type: string
          description: 用户头像
        storeId:
          type: integer
          format: int64
          description: 店铺ID
        storeName:
          type: string
          description: 店铺名称
        storeDescription:
          type: string
          description: 店铺描述
        storeType:
          type: string
          description: 店铺类型
        storeRating:
          type: number
          format: decimal
          description: 店铺评分
        storeImage:
          type: string
          description: 店铺图片
        merchantId:
          type: integer
          format: int64
          description: 商家ID
        merchantName:
          type: string
          description: 商家名称
        merchantPhone:
          type: string
          description: 商家手机号
        merchantAvatar:
          type: string
          description: 商家头像
        riderId:
          type: integer
          format: int64
          description: 骑手ID
        riderName:
          type: string
          description: 骑手名称
        riderPhone:
          type: string
          description: 骑手手机号
        riderAvatar:
          type: string
          description: 骑手头像
        orderItems:
          type: array
          items:
            $ref: '#/components/schemas/OrderItemDetail'
          description: 订单项详情列表
        priceInfo:
          type: object
          description: 价格信息

    OrderItemDetail:
      type: object
      properties:
        productId:
          type: integer
          format: int64
          description: 商品ID
        quantity:
          type: integer
          description: 商品数量
        price:
          type: number
          format: decimal
          description: 商品单价
        totalPrice:
          type: number
          format: decimal
          description: 商品总价
        productName:
          type: string
          description: 商品名称
        productDescription:
          type: string
          description: 商品描述
        productImage:
          type: string
          description: 商品图片
        productCategory:
          type: string
          description: 商品分类

    MerchantOrderListRequest:
      type: object
      properties:
        store_id:
          type: integer
          format: int64
          description: 店铺ID
        status:
          type: integer
          description: 订单状态筛选
        page:
          type: integer
          minimum: 1
          default: 1
          description: 页码
        page_size:
          type: integer
          minimum: 1
          default: 10
          description: 每页大小
      required:
        - store_id
        - page
        - page_size

    UserOrderHistoryRequest:
      type: object
      properties:
        status:
          type: integer
          description: 订单状态筛选
        startTime:
          type: string
          description: 开始时间
        endTime:
          type: string
          description: 结束时间
        page:
          type: integer
          minimum: 1
          description: 页码
        pageSize:
          type: integer
          minimum: 1
          description: 每页大小
      required:
        - page
        - pageSize

    UserCurrentOrderRequest:
      type: object
      properties:
        page:
          type: integer
          minimum: 1
          default: 1
          description: 页码
        page_size:
           type: integer
           minimum: 1
           default: 10
           description: 每页大小

    RiderOrderHistoryQueryRequest:
      type: object
      properties:
        status:
          type: integer
          description: 订单状态筛选
        startTime:
          type: string
          description: 开始时间
        endTime:
          type: string
          description: 结束时间
        page:
          type: integer
          minimum: 1
          description: 页码
        pageSize:
          type: integer
          minimum: 1
          description: 每页大小
      required:
        - page
        - pageSize

    # ==================== 评论相关 DTO ====================
    UserReviewRequest:
      type: object
      properties:
        storeId:
          type: integer
          format: int64
          description: 店铺ID
        productId:
          type: integer
          format: int64
          description: 商品ID
        rating:
          type: integer
          minimum: 1
          maximum: 5
          description: 评分（1-5星）
        comment:
          type: string
          description: 评价内容
        images:
          type: array
          items:
            type: string
          description: 评价图片列表
      required:
        - storeId
        - rating
        - comment

    UserReviewResponse:
      type: object
      properties:
        rating:
          type: integer
          description: 评分
        comment:
          type: string
          description: 评价内容
        images:
          type: array
          items:
            type: string
          description: 评价图片列表

    ReviewReadRequest:
      type: object
      properties:
        store_id:
          type: integer
          format: int64
          description: 店铺ID
        page:
          type: integer
          minimum: 1
          default: 1
          description: 页码
        page_size:
          type: integer
          minimum: 1
          default: 10
          description: 每页数量
        type:
          type: string
          enum: [POSITIVE, NEGATIVE]
          description: 筛选类型（POSITIVE:好评 NEGATIVE:差评）
        has_image:
          type: boolean
          description: 是否有图片筛选

    ReviewPageResponse:
      type: object
      properties:
        reviews:
          type: array
          items:
            $ref: '#/components/schemas/Review'
          description: 评论列表
        totalCount:
          type: integer
          description: 总数量
        currentPage:
          type: integer
          description: 当前页码
        pageSize:
          type: integer
          description: 每页大小
        totalPages:
          type: integer
          description: 总页数

    Review:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: 评论ID
        userId:
          type: integer
          format: int64
          description: 用户ID
        storeId:
          type: integer
          format: int64
          description: 店铺ID
        productId:
          type: integer
          format: int64
          description: 商品ID
        rating:
          type: number
          format: decimal
          description: 评分
        comment:
          type: string
          description: 评价内容
        image:
          type: string
          description: 评价图片
        createdAt:
          type: string
          format: date-time
          description: 创建时间

    # ==================== 优惠券相关 DTO ====================
    CouponCreateRequest:
      type: object
      properties:
        name:
          type: string
          description: 优惠券名称
        type:
          type: string
          enum: [DISCOUNT, FIXED]
          description: 优惠券类型（DISCOUNT:折扣 FIXED:满减）
        value:
          type: number
          format: decimal
          description: 优惠券面值
        minAmount:
          type: number
          format: decimal
          description: 最低消费金额
        storeId:
          type: integer
          format: int64
          description: 店铺ID
        validFrom:
          type: string
          format: date-time
          description: 有效期开始时间
        validTo:
          type: string
          format: date-time
          description: 有效期结束时间
        totalCount:
          type: integer
          description: 发放总数
      required:
        - name
        - type
        - value
        - validFrom
        - validTo
        - totalCount

    CouponCreateResponse:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: 优惠券ID
        name:
          type: string
          description: 优惠券名称
        code:
          type: string
          description: 优惠券代码

    AvailableCouponRequest:
      type: object
      properties:
        store_id:
          type: integer
          format: int64
          description: 店铺ID

    UserClaimCouponRequest:
      type: object
      properties:
        couponId:
          type: integer
          format: int64
          description: 优惠券ID
      required:
        - couponId

    UserViewCouponRequest:
      type: object
      properties:
        status:
          type: string
          enum: [AVAILABLE, USED, EXPIRED]
          description: 优惠券状态筛选
        page:
          type: integer
          minimum: 1
          default: 1
          description: 页码
        pageSize:
          type: integer
          minimum: 1
          default: 10
          description: 每页大小

    UserCouponResponse:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: 用户优惠券ID
        couponId:
          type: integer
          format: int64
          description: 优惠券ID
        name:
          type: string
          description: 优惠券名称
        type:
          type: string
          description: 优惠券类型
        value:
          type: number
          format: decimal
          description: 优惠券面值
        minAmount:
          type: number
          format: decimal
          description: 最低消费金额
        status:
          type: string
          description: 使用状态
        validFrom:
          type: string
          format: date-time
          description: 有效期开始时间
        validTo:
          type: string
          format: date-time
          description: 有效期结束时间
        claimedAt:
          type: string
          format: date-time
          description: 领取时间
        usedAt:
          type: string
          format: date-time
          description: 使用时间

    Coupon:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: 优惠券ID
        name:
          type: string
          description: 优惠券名称
        type:
          type: string
          description: 优惠券类型
        value:
          type: number
          format: decimal
          description: 优惠券面值
        minAmount:
          type: number
          format: decimal
          description: 最低消费金额
        storeId:
          type: integer
          format: int64
          description: 店铺ID
        validFrom:
          type: string
          format: date-time
          description: 有效期开始时间
        validTo:
          type: string
          format: date-time
          description: 有效期结束时间
        totalCount:
          type: integer
          description: 发放总数
        usedCount:
          type: integer
          description: 已使用数量
        createdAt:
          type: string
          format: date-time
          description: 创建时间

    # ==================== 消息相关 DTO ====================
    SendMessageRequest:
      type: object
      properties:
        receiverId:
          type: integer
          format: int64
          description: 接收方用户ID
        receiverRole:
          type: string
          enum: [user, merchant, rider]
          description: 接收方角色
        content:
          type: string
          maxLength: 1000
          description: 消息内容
      required:
        - receiverId
        - receiverRole
        - content

    ChatHistoryRequest:
      type: object
      properties:
        receiverId:
          type: integer
          format: int64
          description: 接收方用户ID
        receiverRole:
          type: string
          enum: [user, merchant, rider]
          description: 接收方角色
        page:
          type: integer
          minimum: 1
          description: 页码
        pageSize:
          type: integer
          minimum: 1
          description: 每页大小
      required:
        - receiverId
        - receiverRole
        - page
        - pageSize

    ChatMessageResponse:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: 消息ID
        senderId:
          type: integer
          format: int64
          description: 发送方用户ID
        senderRole:
          type: string
          description: 发送方角色
        senderName:
          type: string
          description: 发送方姓名
        senderAvatar:
          type: string
          description: 发送方头像
        receiverId:
          type: integer
          format: int64
          description: 接收方用户ID
        receiverRole:
          type: string
          description: 接收方角色
        receiverName:
          type: string
          description: 接收方姓名
        receiverAvatar:
          type: string
          description: 接收方头像
        content:
          type: string
          description: 消息内容
        messageType:
          type: string
          description: 消息类型
        isRead:
          type: boolean
          description: 是否已读
        createdAt:
           type: string
           format: date-time
           description: 创建时间
          type: string
          description: 评价内容
        images:
          type: array
          items:
            type: string
          description: 评价图片列表
        createdAt:
          type: string
          format: date-time
          description: 创建时间
        anonymous:
          type: boolean
          description: 是否匿名评价

    # ==================== 骑手相关 DTO ====================
    RiderRegisterRequest:
      type: object
      properties:
        username:
          type: string
          description: 骑手用户名
        phone:
          type: string
          description: 手机号
        password:
          type: string
          description: 密码
        idCard:
          type: string
          description: 身份证号
        vehicleType:
          type: string
          description: 车辆类型
        vehiclePlate:
          type: string
          description: 车牌号
      required:
        - username
        - phone
        - password

    RiderRegisterResponse:
      type: object
      properties:
        userId:
          type: integer
          format: int64
          description: 骑手ID
        username:
          type: string
          description: 骑手用户名
        phone:
          type: string
          description: 手机号

    RiderLoginRequest:
      type: object
      properties:
        phone:
          type: string
          description: 手机号
        password:
          type: string
          description: 密码
      required:
        - phone
        - password

    RiderLoginResponse:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: 骑手ID
        username:
          type: string
          description: 骑手用户名
        token:
          type: string
          description: JWT令牌

    # ==================== 订单相关 DTO ====================
    OrderCreateRequest:
      type: object
      properties:
        storeId:
          type: integer
          format: int64
          description: 店铺ID
        items:
          type: array
          items:
            $ref: '#/components/schemas/CartItemDTO'
          description: 订单商品列表
        userLocation:
          type: string
          description: 用户位置
        deliveryPrice:
          type: number
          format: decimal
          description: 配送费用
        couponId:
          type: integer
          format: int64
          description: 优惠券ID
        remark:
          type: string
          description: 订单备注
        deadline:
          type: string
          format: date-time
          description: 订单截止时间
      required:
        - storeId
        - items
        - userLocation

    CartItemDTO:
      type: object
      properties:
        productId:
          type: integer
          format: int64
          description: 商品ID
        quantity:
          type: integer
          minimum: 1
          description: 商品数量
        price:
          type: number
          format: decimal
          description: 商品单价
        productName:
          type: string
          description: 商品名称
      required:
        - productId
        - quantity

    OrderResponse:
      type: object
      properties:
        orderId:
          type: integer
          format: int64
          description: 订单ID
        userId:
          type: integer
          format: int64
          description: 用户ID
        storeId:
          type: integer
          format: int64
          description: 店铺ID
        riderId:
          type: integer
          format: int64
          description: 骑手ID
        status:
          type: integer
          description: 订单状态（0:待接单 1:准备中 2:配送中 3:完成 4:取消）
        userLocation:
          type: string
          description: 用户位置
        storeLocation:
          type: string
          description: 店铺位置
        totalPrice:
          type: number
          format: decimal
          description: 订单总价格
        actualPrice:
          type: number
          format: decimal
          description: 实际支付价格
        deliveryPrice:
          type: number
          format: decimal
          description: 配送费用
        remark:
          type: string
          description: 订单备注
        createdAt:
          type: string
          format: date-time
          description: 订单创建时间
        deadline:
          type: string
          format: date-time
          description: 订单截止时间
        endedAt:
          type: string
          format: date-time
          description: 订单结束时间
        items:
          type: array
          items:
            $ref: '#/components/schemas/OrderItemResponse'
          description: 订单项列表

    OrderItemResponse:
      type: object
      properties:
        productId:
          type: integer
          format: int64
          description: 商品ID
        productName:
          type: string
          description: 商品名称
        quantity:
          type: integer
          description: 商品数量
        price:
          type: number
          format: decimal
          description: 商品单价

    Order:
      type: object
      properties:
        id:
          type: integer
          format: int64
          description: 订单ID
        userId:
          type: integer
          format: int64
          description: 用户ID
        storeId:
          type: integer
          format: int64
          description: 店铺ID
        riderId:
          type: integer
          format: int64
          description: 骑手ID
        status:
          type: integer
          description: 订单状态（0:待接单 1:准备中 2:配送中 3:完成 4:取消）
        userLocation:
          type: string
          description: 用户位置
        storeLocation:
          type: string
          description: 店铺位置
        totalPrice:
          type: number
          format: decimal
          description: 订单总价格
        actualPrice:
          type: number
          format: decimal
          description: 实际支付价格
        deliveryPrice:
          type: number
          format: decimal
          description: 配送费用
        remark:
          type: string
          description: 订单备注
        createdAt:
          type: string
          format: date-time
          description: 订单创建时间
        deadline:
          type: string
          format: date-time
          description: 订单截止时间
        endedAt:
          type: string
          format: date-time
          description: 订单结束时间

    OrderItem:
      type: object
      properties:
        orderId:
          type: integer
          format: int64
          description: 订单ID
        productId:
          type: